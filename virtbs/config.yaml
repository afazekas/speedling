paths:
    virtbs_root: /srv/virtbs

address_pool:
        mac_start: '52:54:00:00:00'
        ipv4_start: '172.16.0.0'
        # 16 slices each with 16 maximum network each with maximum ~253 machine
        ipv4_virtbs_prefix: 16  # 255.255.0.0 (not in use)
        ipv4_slice_prefix: 20  # 255.255.240.0
        ipv4_subnet_prefix: 24  # 255.255.255.0
        mac_slice_extra_power: 8  # add 4 bit extra above the nets for the mac pool, just for `ip addressles` interfaces
        # for statless
        # assuming 64 bit sub subnet prefixes
        # The lower bits from first 64 is used speedling as subnet pool
        # It could be a list in the future..
        ipv6_stateless_start: 'fd00:aaaa::0'
        # for dual stack (or with configrive for spcial usage)
        ipv6_from4_start: '0:0:0:0:0:ffff::0'
        bmc_port_pase: 8192
        # options ipv4, ipv4as6, ipv6local, ipv6stateless, ..
        prefered_address: ipv4
        ipv6_stateless_default_enabled: False
        ipv4_address_serving_default_enabled: False

image_flow:
    f29:
        driver: image_download
        url_pattern: https://download.fedoraproject.org/pub/fedora/linux/releases/29//Cloud/x86_64/images/Fedora-Cloud-Base-29-1.2.x86_64.raw.xz
        sha256: 'd44dccfaa302dc25a0ca42ad442d4b1651aca486d8940238649062b72e8bf466'
        compression: xz
        fmt: raw
    ubuntu-18.10:
        driver: image_download
        url_pattern: https://cloud-images.ubuntu.com/cosmic/20190301/cosmic-server-cloudimg-amd64.img
        sha256: '687361c7913cbf27f6245857491cbbd348bbdf3f0ca96cd84d20efd5413c7021'
        fmt: qcow2
    opensuse-15.0:
        driver: image_download
        url_pattern: https://download.opensuse.org/repositories/Cloud:/Images:/Leap_15.0/images/openSUSE-Leap-15.0-OpenStack.x86_64-0.0.4-Buildlp150.12.124.qcow2
        sha256: 'dadcb47d14121b4240827ce9d92fc3d99b1142887dc37adb294493cef698973a'
        fmt: qcow2
    f29-my:
        driver: image_virt_customize
        base_slot: f29
        script:
           file: virtbs/bscript/my.sh
    ubi-my:
        driver: image_virt_customize
        base_slot: ubuntu-18.10
        script:
           file: virtbs/bscript/my.sh
    suse-my:
        driver: image_virt_customize
        base_slot: opensuse-15.0
        script:
           file: virtbs/bscript/my.sh
    f29-my-pkg:
        driver: image_virt_customize
        base_slot: f29-my
        script:
           file: virtbs/bscript/f29_os_basepkg.sh
    ubi-my-pkg:
        driver: image_virt_customize
        base_slot: ubi-my
        script:
           file: virtbs/bscript/ubuntu_os_basepkg.sh
    suse-my-pkg:
        driver: image_virt_customize
        base_slot: suse-my
        script:
           file: virtbs/bscript/opensuse_os_basepkg.sh
    f29-dev:
        driver: image_virt_customize
        base_slot: f29-my-pkg
        script:
            file: virtbs/bscript/os-pipgit.sh
    ubi-dev:
        driver: image_virt_customize
        base_slot: ubi-my-pkg
        script:
            file: virtbs/bscript/os-pipgit.sh
    suse-dev:
        driver: image_virt_customize
        base_slot: suse-my-pkg
        script:
            file: virtbs/bscript/os-pipgit.sh

network_flags:
   mynet:
      internet_access: True
      address_serving_4: True
      # stateless
      address_serving_6: False
      preferred_address: ipv4
      mtu: 1500

   net_team_1:
   net_team_2:
      same_bridge: net_team_1

machine_matrix:
    roles:
        # default gate size (but no swap)
        controller:
            memory: 8192
            vcpu: 8
            disable_address_serving: False
            nets: ['mynet', 'data']
            disks:
               disk0:
                  image_slot:
                  image_tag: default
                  size: '40G'
        # small worker
        worker:
            memory: 2048
            vcpu: 2
            disable_address_serving: False
            nets: ['mynet','data']
        # cloud image as is
        plain:
            memory: 8192
            vcpu: 8
            disable_address_serving: False
            nets: [mynet]
        # cloud image with basic tools
        minim:
            memory: 8192
            vcpu: 8
            nets: [mynet]
            disable_address_serving: False
        # image before getting source pypi packages
        osbase:
            memory: 8192
            vcpu: 8
            nets: [mynet]
            disable_address_serving: False
        # multi disk node for swift/ceph
        disk:
            memory: 4096
            vcpu: 2
            nets: [mynet, 'data', 'replicate']
            disable_address_serving: False
            disks:
                disk1:
                  size: '4G'
                disk2:
                  size: '4G'
                disk3:
                  size: '4G'
        # machine needs to be network booted
        pxe_compute:
            memory: 4096
            vcpu: 2
            disable_address_serving: True
            disks:
               disk0:
                  size: '40G'
        # TODO: support for node group connected net appliances

    fedora:
        controller:
            disks:
                disk0:
                    image_slot: f29-dev
        worker:
            disks:
                disk0:
                    image_slot: f29-dev
        plain:
            disks:
                disk0:
                    image_slot: f29
        minim:
            disks:
                disk0:
                    image_slot: f29-my
        osbase:
            disks:
                disk0:
                    image_slot: f29-my-pkg
        disk:
            disks:
                disk0:
                    image_slot: f29-dev

    ubuntu:
        controller:
            disks:
                disk0:
                    image_slot:  ubi-dev
        worker:
            disks:
                disk0:
                    image_slot: ubi-dev
        plain:
            disks:
                disk0:
                    image_slot: ubuntu-18.10
        minim:
            disks:
                disk0:
                    image_slot: ubi-my
        osbase:
            disks:
                disk0:
                    image_slot:  ubi-my-pkg
        disk:
            disks:
                disk0:
                    image_slot: ubi-dev

    opensuse:
        controller:
            disks:
                disk0:
                    image_slot: suse-dev
        worker:
            disks:
                disk0:
                    image_slot: suse-dev
        plain:
            disks:
                disk0:
                    image_slot: opensuse-15.0
        minim:
            disks:
                disk0:
                    image_slot: suse-my
        osbase:
            disks:
                disk0:
                    image_slot:  suse-my-pkg
        disk:
            disks:
                disk0:
                    image_slot:  suse-dev
    passed:
        controller:
            disks:
                disk0:
                    image_tag: passed
        worker:
            disks:
                disk0:
                    image_tag: passed
        plain:
            disks:
                disk0:
                    image_tag: passed
        minim:
            disks:
                disk0:
                    image_tag: passed
        osbase:
            disks:
                disk0:
                    image_tag: passed
        disk:
            disks:
                disk0:
                    image_tag: passed
